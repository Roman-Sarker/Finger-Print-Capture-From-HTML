<!DOCTYPE html> 

<HTML>
    <HEAD>
        
        <META http-equiv=Content-Language content=en-us>
        <META http-equiv=Content-Type content="text/html; charset=windows-1252">
        <title>Enroll Page</title>
        <link rel="shortcut icon" href="../../assets/ico/favicon.jpg">
        <link href="css/bootstrap.min.css" rel="stylesheet" />   
        <link href="css/main_style.css" rel="stylesheet" />
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script> 
        <script src="js/enroll1.js"></script> 
        <script src="js/codeSeen.js"></script> 
        
        <script type="text/javascript">
            code_seen_off();
        </script>
        <style>
            .myButton {
                box-shadow: 3px 4px 0px 0px #8a2a21;
                background:linear-gradient(to bottom, #c62d1f 5%, #f24437 100%);
                background-color:#c62d1f;
                border-radius:18px;
                border:1px solid #d02718;
                display:inline-block;
                cursor:pointer;
                color:#ffffff;
                font-family:Arial;
                font-size: 15px;
                padding: 3px 12px;
                text-decoration:none;
                text-shadow:0px 1px 0px #810e05;
            }
            .myButton:hover {
                    background:linear-gradient(to bottom, #f24437 5%, #c62d1f 100%);
                    background-color:#f24437;
            }
            .myButton:active {
                    position:relative;
                    top:1px;
            }
            .myButton1 {
	box-shadow: 3px 4px 0px 0px #899599;
	background:linear-gradient(to bottom, #ededed 5%, #bab1ba 100%);
	background-color:#ededed;
	border-radius:15px;
	border:1px solid #d6bcd6;
	display:inline-block;
	cursor:pointer;
	color:#3a8a9e;
	font-family:Arial;
	font-size: 15px;
        padding: 3px 16px;
	text-decoration:none;
	text-shadow:0px 1px 0px #e1e2ed;
}
.myButton1:hover {
	background:linear-gradient(to bottom, #bab1ba 5%, #ededed 100%);
	background-color:#bab1ba;
}
.myButton1:active {
	position:relative;
	top:1px;
}

            
            .center {
                margin: auto;
                width: 40%;
                padding: 0px;
                border: 1px springgreen; 
          }
            .pad{padding: 3px 20px;}
            
        </style>
        
    </HEAD>
    <body onLoad=" onBodyLoad()" >   <!--onload = "disableClick();"-->
        
            
        <form method="post" id="enrollForm" action="">
            <Input type="Hidden" name="name"  id="name" value="<%=name%>"> 
            <Input type="Hidden" name="app_user"  id="app_user" value="<%=app_user%>"> 
            <Input type="Hidden" name="ai_logid"  id="ai_logid" value="<%=ai_logid%>">  
            <Input type="Hidden" name="cust_type"  id="cust_type" value="<%=cust_type%>">
            <Input type="Hidden" name="LThumb"  id="LThumb" value=">"> 
            <Input type="Hidden" name="LIndex"  id="LIndex" value="">  
            <Input type="Hidden" name="LMiddle"  id="LMiddle" value="">  
            <Input type="Hidden" name="LRing"  id="LRing" value="">   
            <Input type="Hidden" name="LLittle"  id="LLittle" value=""> 
            <Input type="Hidden" name="RThumb"  id="RThumb" value=""> 
            <Input type="Hidden" name="RIndex"  id="RIndex" value="">  
            <Input type="Hidden" name="RMiddle"  id="RMiddle" value="">  
            <Input type="Hidden" name="RRing"  id="RRing" value="">  
            <Input type="Hidden" name="RLittle"  id="RLittle" value="">  
            <Input type="Hidden" name="serial"  id="serial" value="">  
            
        </form> 
 
        <div class="center" style="width:700px; height: 100%; background-color: #DED7D5; box-shadow: 10px 10px 5px grey;" >
            <div style="height: 600px;">
                <!--  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered" role="document"> -->
                <div >
                    <div  style=" color:#194426; height: 50px; margin-top: -20px; ">
                        <h5 style="text-align:center; font-size: larger; padding-top: 15px; ">Scan Fingers</h5>
                        
                    </div>  
                    <div style="margin-left: 7px; ">
                        <div >
                            <div >
                                <div >
                                    <div class="row"> 
                                        <Button id="LeftThumb" onclick="beginOperation('LThumb','Left Thumb','enroll', 'ansisdk', false)"   class="myButton pad" ><b>LEFT THUMB</b></Button>
                                        <Button id="LeftIndex" onclick="beginOperation('LIndex','Left Index','enroll', 'ansisdk', false)"   class="myButton pad" ><b>LEFT INDEX</b></Button>  
                                    
                                        <a id="LeftMiddle" onclick="beginOperation('LMiddle','Left Middle','enroll', 'ansisdk', false)" role="button" class="myButton1 pad" title="LEFT THUMB">LEFT MIDDLE</a>
                                        <a id="LeftRing" onclick="beginOperation('LRing','Left Ring','enroll', 'ansisdk', false)" role="button" class="myButton1 pad" title="LEFT RING">LEFT RING</a> 
                                        <a id="LeftLittle" onclick="beginOperation('LLittle','Left Little','enroll', 'ansisdk', false)" role="button" class="myButton1 pad" title="RIGHT THUMB">LEFT LITTLE</a> 
                                    </div>
                                    <br>
                                    <div class="row"> 
                                        <Button id="RightThumb" onclick="beginOperation('RThumb','Right Thumb','enroll', 'ansisdk', false)"  class="myButton" ><b>RIGHT THUMB</b></Button> 
                                        <Button id="RightIndex" onclick="beginOperation('RIndex','Right Index','enroll', 'ansisdk', false)"  class="myButton"  ><b>RIGHT INDEX</b></Button> 
                                    
                                        <a id="RightMiddle" onclick="beginOperation('RMiddle','Right Middle','enroll', 'ansisdk', false)" role="button" class="myButton1" title="RIGHT THUMB">RIGHT MIDDLE</a> 
                                        <a id="RightRing" onclick="beginOperation('RRing','Right Ring','enroll', 'ansisdk', false)" role="button" class="myButton1" title="RIGHT RING">RIGHT INDEX</a> 
                                        <a id="RightLittle" onclick="beginOperation('RLittle','Right Little','enroll', 'ansisdk', false)" role="button" class="myButton1" title="RIGHT THUMB">RIGHT LITTLE</a> 
                                    </div>
                                    <br>
                                    <!--This div show the black screen for capture finger-->
                                    
                                    <div class="row">
                                        <div class="col-md-12"> 
                                            <p id="status_alert" style="visibility: hidden;"  class="success_alert"> </p>
                                            <!--<a id="resultLink" href="http://www.futronic-tech.com" rel="external" media="application/octet-stream"></a>-->
                                        </div>  
                                    </div>
                                    
                                    
                                    <!--
                                    <div style="margin-left: 30px; ">
                                        <div > 
                                            <p id="status_alert" style="visibility: hidden;"  class="success_alert"> </p>
                                         <!--   <a id="resultLink" href="http://www.futronic-tech.com" rel="external" media="application/octet-stream"></a>-->
                                                 
                                     <!--   </div>  -->
                                   <!-- </div> -->
                            
                                </div>
                            
                            </div>
                        </div>
                    </div>
                    <div class="center" >
                         <canvas id="fingerframe" height="300" width="240" style="background-size:cover;"></canvas>
                    </div>
                    <div class ="col-md-2" style="margin-top: 32px;">
                            <button  class="myButton1" type="button"  onclick="processData()" style="background-color: #135087; float:right; margin-right:10px; font-size: 12px; ">Submit</button>                         
                    </div>
                    <div >

                        <div class ="col-md-10" >
                            <div class ="row">
                                <p style="color: red">* Finger indicated by red button must be given.</p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <div class="center">
                        <p><i>copywrite@EraInfoTechLtd.</i></p>
                    </div>
                </div>
            </div>
        </div> 
        
        
        <script language=JavaScript>
            /* 
                * To change this license header, choose License Headers in Project Properties.
                * To change this template file, choose Tools | Templates
                * and open the template in the editor.
                */

               var fpHTTSrvOpEP = "http://127.0.0.1:15170/fpoperation";
               var resultLink;
               var fingerFrame;
               var lastInitOp;
               var nameOfDOM;
               var inputDOM, domMsgString;

               function takeFingerData(index) {
                   document.getElementById("FPImage1").src = "../../assets/images/hands/" + index + ".png";
                   document.getElementById("FPImage1").style.backgroundColor = "#FFFF99";
                   makeStatusMSgHidden("status_alert");
                   captureFP();
               }

               function captureFP() {

               }

               function showModal() {
                   $('#myModal').modal('exampleModalCenter');
                   //document.getElementById("FPImage1").src = "../../images/hands/1.png";
                   makeStatusMSgHidden("status_alert");
               }

               function doProcessing(buttonId, inputDOM, statusMes, fingerData, quality) {
                   document.getElementById(inputDOM).value = fingerData;
                   makeStatusMSgVisible("status_alert", statusMes + " is successfully captured . Quality is " + quality);
                   changeClassOfDomElement("status_alert", "success_alert", "danger_alert");
               }

               function changeClassOfDomElement(element, addClass, removeClass) {
                   document.getElementById(element).classList.remove(addClass);
                   document.getElementById(element).classList.remove(removeClass);
                   document.getElementById(element).classList.add(addClass);
               }

               function makeStatusMSgVisible(dom, statusMsg) {
                   var x = document.getElementById(dom);
                   x.innerHTML = statusMsg;
                   x.style.visibility = 'visible';
               }

               function makeStatusMSgHidden(dom) {
                   var x = document.getElementById(dom);
                   x.style.visibility = 'hidden';
               }

// Start process after submit button click
               function processData() {
                   
                    var LThumbValue = document.getElementById("LThumb").value;
                    var LIndexValue = document.getElementById("LIndex").value;
                    var RThumbValue = document.getElementById("RThumb").value;
                    var RIndexValue = document.getElementById("RIndex").value;
                    
                    var LMiddleValue = document.getElementById("LMiddle").value
                    var LRingValue = document.getElementById("LRing").value
                    var LLittleValue = document.getElementById("LLittle").value
                    var RMiddleValue = document.getElementById("RMiddle").value
                    var RRingValue = document.getElementById("RRing").value
                    var RLittleValue = document.getElementById("RLittle").value


                    if (LThumbValue == null || LThumbValue == "") {
                        changeClassOfDomElement("status_alert", "danger_alert", "success_alert");
                        makeStatusMSgVisible("status_alert", "Please provide left thumb finger");
                        //alert("Please provide left thumb finger");
                    } else if (LIndexValue == null || LIndexValue == "") {
                        changeClassOfDomElement("status_alert", "danger_alert", "success_alert");
                        makeStatusMSgVisible("status_alert", "Please provide left index finger");
                        //alert("Please provide left index finger");
                    } else if (RThumbValue == null || RThumbValue == "") {
                        changeClassOfDomElement("status_alert", "danger_alert", "success_alert");
                        makeStatusMSgVisible("status_alert", "Please provide right thumb finger");
                        //alert("Please provide right thumb finger");
                    } else if (RIndexValue == null || RIndexValue == "") {
                        changeClassOfDomElement("status_alert", "danger_alert", "success_alert");
                        makeStatusMSgVisible("status_alert", "Please provide right index finger");
                        //alert("Please provide right index finger");
                    } else {
                        //$('#exampleModalCenter').modal('hide');
                        //document.getElementById('enrollForm').action = "../../enroll2.jsp";
                        //document.getElementById("enrollForm").submit();
                        //alert("Mandatory four finger captured.");
                        
                        
                        // Show all finger data
                            //alert("Left Thumb : "+LThumbValue);
                         /*   document.write("LThumbValue : "+LThumbValue);
                            document.write("<br>LIndexValue : "+LIndexValue);
                            document.write("<br>RThumbValue : "+RThumbValue);
                            document.write("<br>RIndexValue : "+RIndexValue);
                            document.write("<br>LMiddleValue : "+LMiddleValue);
                            document.write("<br>LRingValue : "+LRingValue);
                            document.write("<br>LLittleValue : "+LLittleValue);
                            document.write("<br>RMiddleValue : "+RMiddleValue);
                            document.write("<br>RRingValue : "+RRingValue);
                            document.write("<br>RLittleValue : "+RLittleValue);*/
                            
                    //http request to matching server(FFinger)   
                    var name = "71653";
                    var app_user = "ROMAN98";
                    var ai_logid = "'73284'";
                    var cust_type = "CUS";
                    var serial = "01000410";
                    
                    var Url = "http://10.11.200.20:8087/FFingerBa/FingerEnrollment";
                    var xhr = new XMLHttpRequest();
                    //var data = JSON.stringify({"firstName": "Roman", "lastName": "Sarker"});
                    //var data = JSON.stringify({"name":"71653","app_user":"ROMAN98","ai_logid":"'73284'","cust_type":"CUS","serial":"01000410","lmiddle":"","lring":"","lthumb":"Rk1SACAyMAAAAAFKAAABQAHgAMUAxQEAAAA8MoBQATurAECCARWGAIC5ANtoAEBRAZPHAECVAa95AIBhANSLAIA1AQiVAIBdAXnDAIDAAWjDAIBxAQmNAICTAKpuAIA6AbDAAEB3AZtLAIClASxmAIBjAS8LAIDYAKxhAICjATxaAIDEAa+wAEDhANtkAIDrAWnHAIByASaHAICXAMPpAEBxAbIAAIBnAKiAAICPASxuAEB9AVyyAEDXAL3hAECJAWPGAIBNAJd6AICgAZ4zAIBBASoaAED7APrbAEBcABWOAIB6AbZuAIB+AapSAEAvATSpAIBdAcNQAECGAI5wAICTAU1pAECkAWpLAEDxABZ5AID1AOrcAEDyASnbAIA1AWK1AEDsAMPkAECqABp1AEDnALTkAIC0AZm1AEDtACXvAEAPAU6rAAAA","lindex":"Rk1SACAyMAAAAAEsAAABQAHgAMUAxQEAAAA8LYDHAVC3AECvAQVSAECdAVBDAEB3AWjpAICZAKrkAICTAUtJAEDoAOdUAID5ASVQAEBuAMwVAECpAMFpAIDmAQXQAECVAI6AAIDoAUDAAEBvAPISAIBgAQS3AIBHAQy3AECqAZ8mAEBcABWQAECZAG19AEB4AMaJAIBYAX/bAEB4ASXGAIDBAOdXAEBgAXfLAIB8AIGOAECIAOiSAECpABqAAICdAHBzAEBIAPwrAECOAVZLAEDsACXwAICOAI53AECIAaoKAIBxAL2cAIByAZthAIBdAJ4SAEB+ASVBAECJAMHkAED/AR/OAECqAX6bAIBuAZXpAEBoALGcAICEAaBpAECGAH53AEB4ACqLAAAA","llittle":"","rthumb":"Rk1SACAyMAAAAAGGAAABQAHgAMUAxQEAAAA8PEBPAUGuAICZAWTHAEA0ATevAEClARCcAIDbAZOeAECQAX/JAECPAJaHAEC3AQCJAECfAP6VAIC6AKr1AICMAMaUAICGAS2uAEBYALwSAEDeAQ9rAIBhAPyhAICzAYNOAICMAJCAAIAvATquAICQAJuHAIBpAIGAAEBoASavAECvAcFkAICkAPqVAEDXAZKkAIByAVO3AIC+ART2AECbAR8QAIDXAR/uAEDbAZyQAEAbAYS9AEBcABWQAEDeAXRDAEDdALRzAEDsACXvAIDFARZyAIB6AZjNAICgAR+kAEC3ASXmAEAqAVe1AICrAJB3AEB9AaDVAEBLAMGVAIClAB99AICxAXvXAICpAZtHAEDQAaIVAIBvAOGYAED4ARXmAIDBASDzAEB8AH+JAIBcAO+lAIDNAW/GAICqAavvAEB+AHAEAIDKAaCGAICdACJmAECdAITvAEAwAPorAEDXAYRJAID1ACJ6AAAA","rindex":"Rk1SACAyMAAAAADwAAABQAHgAMUAxQEAAAA8I4CxAUJHAICKAUiwAICMASapAEBWAYSQAIB4ANefAIBKATuvAEBBAW0kAEBvALiaAECpAOLlAIBtAS0kAICTARCbAICkATXAAICtALT1AIC+ALGGAICzAOp3AEBEAU43AIA1AZASAEAsAX4VAIBYATewAIApAWkuAEBRATImAEC8AJFyAEBcABWQAICzAZCkAICQAaUcAICfAHQUAIClAB98AICIAaqcAEAyAUewAEDxABZ5AICbACGJAICZAaabAEC8ABGAAEAsAYqQAEBgAIOaAAAA","rmiddle":"","rring":"","rlittle":""})
                    var data = JSON.stringify({"name":name,"app_user":app_user,"ai_logid":ai_logid,"cust_type":cust_type,
                        "serial":serial,"lmiddle":LMiddleValue,"lring":LRingValue,"lthumb":LThumbValue,
                        "lindex":LIndexValue,"llittle":LLittleValue,"rthumb":RThumbValue,"rindex":RIndexValue,
                        "rmiddle":RMiddleValue,"rring":RRingValue,"rlittle":RLittleValue})

                    xhr.open('POST', Url, true);
                    xhr.send(data);
                    xhr.onreadystatechange = processRequest;
                    xhr.setRequestHeader("Content-Type", "application/json");
                    function processRequest(e) {
                        if (xhr.readyState == 4 && xhr.status == 200) {
                            alert(xhr.responseText);
                            //var response1 = JSON.parse(xhr.responseText);
                            /*document.getElementById("origin").innerHTML = response1.origin;
                            document.getElementById("url").innerHTML = response1.url;*/
                        }
                    }
                    }

                    
                    
                }

            // Function to fixed error.
               function fixError(statusText, errorText) {
                   textResult.style = "color:blue";
                   changeClassOfDomElement("status_alert", "danger_alert");

                   if (errorText != "") {
                       if (statusText != "") {
                           textResult.innerHTML = errorText + "(" + statusText + ")";
                       } else {
                           textResult.innerHTML = errorText;
                       }
                   } else {
                       textResult.innerHTML = statusText
                   }
               }

               function setAskTest(textMes) {
                   textResult.style = "color:blue"
                   textResult.innerHTML = textMes;
               }

               function setOperationResult(textMes) {
                   textResult.style = "color:blue"
                   textResult.innerHTML = textMes;
               }

               function beginOperation(nameOfDOM, msgString, opName, libName, sendSampleNum) {
                   inputDOM = nameOfDOM;
                   domMsgString = msgString;

                   //ISO template
                   var json = JSON.stringify({operation: opName, username: "", usedlib: libName, isoconv: "1", samplenum: "1"}); 

                   // ANSI template
                   //var json = JSON.stringify({operation: opName, username: "", usedlib: libName, isoconv: "0", samplenum: "1"});
                   changeClassOfDomElement("status_alert", "success_alert");

                   var req = new XMLHttpRequest();
                   req.open("POST", fpHTTSrvOpEP);
                   req.setRequestHeader('Content-type', 'application/json; charset=utf-8');

                   req.onload = function () {
                       if (req.status == 200) {
                           setAskTest("Operation begin");
                           parseOperationDsc(JSON.parse(req.response));
                       } else
                           fixError(req.statusText, "Server response");
                   };
                   req.onerror = function () {
                       changeClassOfDomElement("status_alert", "danger_alert");
                       makeStatusMSgVisible("status_alert", "Yu have to install futronic sdk");
                   };
                   req.send(json);
               }

               function cancelOperation() {
                   var url = fpHTTSrvOpEP + '/' + lastInitOp + '/cancel';
                   put(url);
               }

               function getOperationState(opId) {
                   var url = fpHTTSrvOpEP + '/' + opId;
                   var req = new XMLHttpRequest();
                   req.open('GET', url);
                   req.onload = function () {
                       if (req.status == 200) {
                           if (req.readyState == 4) {
                               parseOperationDsc(JSON.parse(req.response));
                           }
                       } else {
                           fixError(req.statusText, "Server response");

                       }
                   };
                   req.onerror = function () {
                       fixError("", "You have to install Futronic SDK");

                   };
                   req.send();
               }

               function getOperationImg(opId, frameWidth, frameHeight) {
                   var url = fpHTTSrvOpEP + '/' + opId + '/image';
                   var req = new XMLHttpRequest();
                   req.open('GET', url);
                   req.responseType = "arraybuffer";
                   req.onload = function () {
                       if (req.status == 200) {
                           drawFingerFrame(new Uint8Array(req.response), opId, frameWidth, frameHeight);
                       } else {
                           changeClassOfDomElement("status_alert", "danger_alert");
                           makeStatusMSgVisible("status_alert", "fingerprint image is not got");
                       }
                   };
                   req.onerror = function () {
                       enableControlsForOp(false);
                   };

                   req.send();    
               }

               function arrayBufferToBase64(buffer) {
                   var binary = '';
                   var bytes = buffer;
                   var len = bytes.byteLength;
                   for (var i = 0; i < len; i++) {
                       binary += String.fromCharCode(bytes[ i ]);
                   }

                   var base64String = window.btoa(binary);
                   // window.alert(base64String);
                   return base64String;
               }

               function getOperationTemplate(urlOfTemplate) {
                   try {
                       var url = urlOfTemplate;
                       var req = new XMLHttpRequest();
                       req.open('GET', url);
                       req.responseType = "arraybuffer";

                       req.onload = function () {
                           if (req.status == 200) {
                               //--
                               var byteArray = new Uint8Array(req.response); 
                                   //alert("Finger Quality ISO[26]: "+byteArray[26]);// Image quality
                               if(byteArray[26]<60){
                                   alert("Finger quality is poor. Quality : "+byteArray[26]);
                               }else{
                                   var b64Encoded = arrayBufferToBase64(byteArray);
                                   document.getElementById(inputDOM).value = b64Encoded;
                                   changeClassOfDomElement("status_alert", "success_alert");
                                   makeStatusMSgVisible("status_alert", domMsgString + " is successfully captured. Standard "+byteArray[26]);
                               }
                           } else {
                               changeClassOfDomElement("status_alert", "danger_alert");
                               makeStatusMSgVisible("status_alert", "fingerprint template is not got by the system");
                           }
                       };
                       req.onerror = function () {
                           changeClassOfDomElement("status_alert", "danger_alert");
                           makeStatusMSgVisible("status_alert", "fingerprint template is not got by the system");
                       };

                       req.send();
                   } catch (e) {
                       alert(e.message);
                   }
               }



               function linkOperationTemplate(opId, operationName) {
                   var target = "/template";
                   var url = fpHTTSrvOpEP + '/' + opId + target;
                   getOperationTemplate(url);

                /* var saveAs = "template.bin";
                   var resultText = "Result template";
                   resultLink.href = url;

                   resultLink.download = saveAs;
                   resultLink.innerHTML = resultText;
                   resultLink.click();  */
               }

               function deleteOperation(opId) {
                   var url = fpHTTSrvOpEP + '/' + opId;
                   deleteVerb(url);
               }

               function parseOperationDsc(opDsc) {
                   var res = true;

                   if (opDsc.state == 'done') {
                       enableControlsForOp(false);

                       if (opDsc.status == 'success') {
                           setOperationResult(opDsc.message);
                           linkOperationTemplate(opDsc.id, opDsc.operation)
                       }

                       if (opDsc.status == 'fail') {
                           fixError("", opDsc.errorstr)
                           res = false;

                           if (parseInt(opDsc.errornum) != -1) {
                               deleteOperation(opDsc.id);
                           }
                       }
                   } else if (opDsc.state == 'init') {
                       lastInitOp = opDsc.id ;
                       try{
                           deviceSN = opDsc.sn;
                           document.getElementById('serial').value=deviceSN;
                       }catch(e){
                           document.getElementById('serial').value="";
                       }
                       setTimeout(getOperationState, 1000, opDsc.id);
                       setTimeout(getOperationImg, 1000, opDsc.id, parseInt(opDsc.devwidth), parseInt(opDsc.devheight));
                   } else if (opDsc.state == 'inprogress')
                   {
                       if (opDsc.fingercmd == 'puton') {
                           setAskTest("Put finger on scanner");
                       }

                       if (opDsc.fingercmd == 'takeoff') {
                           setAskTest("Take off finger from scanner");
                       }

                       setTimeout(getOperationState, 1000, opDsc.id);
                       setTimeout(getOperationImg, 1000, opDsc.id, parseInt(opDsc.devwidth), parseInt(opDsc.devheight));
                   }

                   return res;
               }

               function drawFingerFrame(frameBytes, opId, frameWidth, frameHeight) {
                   var ctx = fingerFrame.getContext('2d');
                   var tempCanvas = document.createElement("canvas");
                   tempCanvas.width = frameWidth;
                   tempCanvas.height = frameHeight;
                   var tempCtx = tempCanvas.getContext("2d");
                   var imgData = tempCtx.createImageData(frameWidth, frameHeight);
                   for (var i = 0; i < frameBytes.length; i++) {
                       // red
                       imgData.data[4 * i] = frameBytes[i];
                       // green
                       imgData.data[4 * i + 1] = frameBytes[i];
                       // blue
                       imgData.data[4 * i + 2] = frameBytes[i];
                       //alpha
                       imgData.data[4 * i + 3] = 255;
                   }
                   tempCtx.putImageData(imgData, 0, 0, 0, 0, frameWidth, frameHeight);
                   ctx.drawImage(tempCanvas, 0, 0, frameWidth, frameHeight, 0, 0, fingerFrame.width, fingerFrame.height);
               }

               function deleteVerb(url) {
                   var req = new XMLHttpRequest();
                   req.open("DELETE", url);
                   req.onload = function () {
                       if (req.status == 200) {
                       } else {
                           fixError(req.statusText, "Server response");
                       }
                   };
                   req.onerror = function () {
                       fixError("", "You have to install futronic sdk");
                   };
                   req.send();
               }

               function put(url) {
                   var req = new XMLHttpRequest();
                   req.open('PUT', url);
                   req.onload = function () {
                       if (req.status != 200) {
                           fixError(req.statusText, "Server response");
                       }
                   };
                   req.onerror = function () {
                       fixError("", "FPHttpServer not available");
                   };
                   req.send();
               }

               function enableControls() {
               }

               function enableControlsForOp(opBegin) {
               }

               function CheckFPHttpSrvConnection()
               {
                   var req = new XMLHttpRequest();
                   req.open('GET', fpHTTSrvOpEP);
                   req.onload = function () {
                       if (req.status == 200) {
                           enableControls();
                           setAskTest("Press operation button");
                       } else {
                           fixError(req.statusText, "Server response")
                       }
                   };
                   req.onerror = function () {
                       fixError("", "You have to install Futronic sdk.");
                       setTimeout(CheckFPHttpSrvConnection, 1000);
                   };
                   req.send();
               }

               function onBodyLoad()
               {
                   textResult = document.getElementById("status_alert");

                   fingerFrame = document.getElementById("fingerframe");
                   resultLink = document.getElementById("resultLink");


                   var defImg = new Image();

                   defImg.onload = function () {
                       var context = fingerFrame.getContext('2d');
                       context.drawImage(defImg, 0, 0);
                   };
                   defImg.src = "../../assets/images/hands/1.png";

                   CheckFPHttpSrvConnection();
               }

          ////*** Disable f12 key
            
            document.onkeypress = function (event) {  
            event = (event || window.event);  
            if (event.keyCode == 123) {  
            return false;  
            }  
            }  
            document.onmousedown = function (event) {  
            event = (event || window.event);  
            if (event.keyCode == 123) {  
            return false;  
            }  
            }  
            document.onkeydown = function (event) {  
            event = (event || window.event);  
            if (event.keyCode == 123) {  
            return false;  
            }  
            } 
          
          
          //2. Only work for right button of mouse
          	window.oncontextmenu = function () {
				return false;
			}
                        alert(event.keyCode);
			$(document).keydown(function (event) {
				if (event.keyCode == 123) {
					return false;
				}
				else if ((event.ctrlKey && event.shiftKey && event.keyCode == 73) || (event.ctrlKey && event.shiftKey && event.keyCode == 74)) {
                                
            return false;
				}
			});  
          
          
          /* 1.          var message = "";
        ///////////////////////////////////
        function clickIE() {
            if (document.all) {
                (message);
                return false;
            }
        }

        function clickNS(e) {
            if (document.layers || (document.getElementById && !document.all)) {
                if (e.which == 2 || e.which == 3) {
                    (message);
                    return false;
                }
            }
        }
        if (document.layers) {
            document.captureEvents(Event.MOUSEDOWN);
            document.onmousedown = clickNS;
        } else {
            document.onmouseup = clickNS;
            document.oncontextmenu = clickIE;
        }

        document.oncontextmenu = new Function("return false")*/
        </script>
        
    </body>
</html>


